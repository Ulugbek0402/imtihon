<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Transaction History | FinanceHome</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
        body { background-color: #f0f2f5; font-family: 'Segoe UI', sans-serif; }
        .sidebar { width: 260px; height: 100vh; position: fixed; background: #fff; border-right: 1px solid #e0e0e0; padding: 30px 20px; }
        .main-content { margin-left: 260px; padding: 40px; }
        .nav-link { color: #555; padding: 12px; border-radius: 10px; margin-bottom: 5px; }
        .nav-link:hover, .nav-link.active { background: #e7f0ff; color: #0d6efd; }
        .card-custom { border: none; border-radius: 20px; box-shadow: 0 10px 30px rgba(0,0,0,0.03); background: #fff; padding: 25px; }
        .badge-income { background-color: #d1e7dd; color: #0f5132; }
        .badge-expense { background-color: #f8d7da; color: #842029; }
    </style>
</head>
<body>

<div class="sidebar">
    <h4 class="fw-bold text-primary mb-5">ðŸ’° FinanceHome</h4>
    <ul class="nav flex-column">
        <li class="nav-item"><a class="nav-link" href="{% url 'home' %}">Home</a></li>
        <li class="nav-item"><a class="nav-link active" href="{% url 'history' %}">History</a></li>
        <li class="nav-item"><a class="nav-link" href="#">Budgets</a></li>
        <li class="nav-item mt-auto"><a class="nav-link text-danger" href="{% url 'logout' %}">Logout</a></li>
    </ul>
</div>

<div class="main-content">
    <div class="d-flex justify-content-between align-items-center mb-4">
        <h2 class="fw-bold">Transaction History</h2>
        <div class="dropdown">
            <button class="btn btn-white shadow-sm dropdown-toggle" type="button" data-bs-toggle="dropdown">
                Filter by Type
            </button>
            <ul class="dropdown-menu">
                <li><a class="dropdown-menu" href="?type=">All</a></li>
                <li><a class="dropdown-item text-success" href="?type=INCOME">Incomes</a></li>
                <li><a class="dropdown-item text-danger" href="?type=EXPENSE">Expenses</a></li>
            </ul>
        </div>
    </div>

    <div class="card card-custom">
        <div class="table-responsive">
            <table class="table table-hover align-middle">
                <thead class="table-light">
                    <tr class="small text-muted">
                        <th>DATE</th>
                        <th>ACCOUNT</th>
                        <th>CATEGORY</th>
                        <th>TYPE</th>
                        <th class="text-end">AMOUNT</th>
                    </tr>
                </thead>
                <tbody>
                    {% for t in transactions %}
                    <tr>
                        <td class="text-muted small">{{ t.date|date:"d M, Y H:i" }}</td>
                        <td class="fw-bold">{{ t.account.name }}</td>
                        <td>{{ t.category }}</td>
                        <td>
                            <span class="badge rounded-pill {% if t.type == 'INCOME' %}badge-income{% else %}badge-expense{% endif %}">
                                {{ t.type }}
                            </span>
                        </td>
                        <td class="text-end fw-bold {% if t.type == 'INCOME' %}text-success{% else %}text-danger{% endif %}">
                            {% if t.type == 'INCOME' %}+{% else %}-{% endif %}
                            {{ t.amount }} {{ t.account.currency.code }}
                        </td>
                    </tr>
                    {% empty %}
                    <tr>
                        <td colspan="5" class="text-center py-5 text-muted">No transactions found.</td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
    </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>